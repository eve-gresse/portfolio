<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Développement d’une solution sur PLC pour l’automatisation du contrôle de température d’un congélateur</title>
  <link rel="stylesheet" href="style_page.css" />
</head>


<body>
    <div class="title">
        <span class="left">Portfolio</span>
        <span class="center">Eve Gresse</span>
        <span class="right">Ingénieure Informatique</span>
    </div>
    <div class="container">
        <header>
            <h1>Développement d’une solution sur PLC pour l’automatisation du contrôle de température d’un congélateur</h1>
            <div class="subtitle">Stage – Airbus Defence and Space · Communication LoRaWAN · Plateforme IoT ThingWorx · PLC Industrial Shields M‑Duino 19 R+</div>
            <div>
                <span class="badge">LoRaWAN</span>
                <span class="badge">ThingWorx</span>
                <span class="badge">Modbus (Adeunis)</span>
                <span class="badge">Arduino / EEPROM</span>
                <span class="badge">MAX7219</span>
            </div>
        </header>
    </div>

    <section class="card" id="objectif">
        <p>
            Lors de mon stage chez Airbus Defence and Space, j’ai travaillé sur l’automatisation du contrôle de température d’un congélateur en utilisant LoRaWAN.
        </p>
        <h2>1. Objectif</h2>
        <p>
            L’objectif était de surveiller en continu la température de congélateurs stockant des produits chimiques devant être conservés dans des conditions strictes. Le système existant, déjà connecté à <strong>ThingWorx</strong>, présentait une faiblesse : en cas de coupure réseau, la porte ne pouvait plus se verrouiller car la logique était centralisée côté plateforme.
        </p>
        <div class="callout">
            <strong>But</strong> : rendre le système <em>autonome et fiable</em> en déplaçant la logique critique sur le PLC pour garantir le verrouillage automatique même hors ligne.
        </div>
    </section>


    <section class="card" id="presentation">
        <h2>2. Présentation de la mission</h2>
        <p>
            La réalisation de la mission repose sur un <strong>PLC M‑Duino 19 R+ (Industrial Shields)</strong> communiquant avec ThingWorx via <strong>LoRaWAN</strong>, au travers d’un convertisseur <strong>Modbus Adeunis</strong>.
        </p>
        <p>
            Le rôle du PLC est de:
        </p>
        <ul>
            <li>Mesurer la température et <strong>verrouiller la porte</strong> si la température sort de la plage autorisée trop longtemps.</li>
            <li>Recevoir dynamiquement les <strong>paramètres</strong> (seuils, temporisation, offset de calibration) depuis ThingWorx.</li>
            <li>Assurer l’<strong>autonomie</strong> en cas de coupure réseau ou électrique.</li>
        </ul>
        <p>
            Le but étant de faire quelque chose de similaire a ce schéma : 
        </p>
        
        <figure class="image-container">
            <img src="images/schéma_fonctionnement_congels.png" alt="Schéma de la communication PLC / ThingWorx" />
            <figcaption>Le PLC reçoit la configuration des seuils, de la temporisation et de l'offset via LoRaWAN. Il analyse en continu la température et si un dépassement de seuil survient il envoie une commande de verrouillage.</figcaption>
        </figure>

    </section>

    

    
    <section class="card" id="demarche">
        <h2>3. Démarche</h2>


        <h3>3.1 Prise en main</h3>
        <p>
            J’ai d’abord étudié le code existant, à la fois côté ThingWorx et côté PLC, afin de comprendre les mécanismes de communication (envoi, réception et traitement des commandes).
        </p>


        <h3>3.2 Verrouillage automatique</h3>
        <p>
            Ma première contribution a été l’implémentation d’un verrouillage automatique de la porte si la température dépassait les seuils définis. Par défaut, une temporisation de 15 minutes a été fixée avant verrouillage.
        </p>
        <p>
            Dans un premier temps, les seuils étaient codés en dur, ce qui manquait de flexibilité. J’ai donc modifié la logique de communication afin que les seuils puissent être configurés en temps réel depuis ThingWorx. Cela a nécessité :
        </p>
        <ul>
            <li>La création d’un script côté ThingWorx pour envoyer les nouvelles valeurs,</li>
            <li>L’adaptation du code embarqué côté PLC pour les recevoir et les appliquer.</li>
        </ul>



        <h3>3.3 Améliorations de fiabilité</h3>
        <p>Avec mon tuteur, nous avons identifié deux limitations à corriger :</p>
        <div class="grid">
            <div>
                <h4>• Sauvegarde des seuils dans la mémoire du PLC pour éviter leur perte en cas de coupure électrique.</h4>
                <p>
                    Utilisation de l’<strong>EEPROM</strong> pour sauvegarder les seuils et les restaurer après coupure électrique, en limitant les écritures (seulement si la valeur change) pour préserver la durée de vie.
                </p>
            </div>
            <div>
            <h4>Configuration à distance du temps avant verrouillage.</h4>
            <p>
                Contrainte : le convertisseur Modbus ne transmet que <strong>trois données simultanées</strong> (verrouillage, seuil min, seuil max). Pour contourner cela, j’ai réorganisé le code et mis en place un système d’identifiants (ID) :
            </p>
            <ul class="list-ids">
                <li><strong>ID 0</strong> : commande de verrouillage</li>
                <li><strong>ID 1</strong> : mise à jour des seuils</li>
                <li><strong>ID 2</strong> : mise à jour du temps de temporisation</li>
                <li><strong>ID 3</strong> : mise à jour de l'offset</li>
            </ul>
            <p>
                J'ai ajouté également un système de vérification des envois grâce a une file d'attente afin d'être certains que le PLC à bien reçu les messages de ThingWorx.
            </p>
            </div>
        </div>

        <h3>3.4 Ajouts fonctionnels</h3>

        <p>Enfin, plusieurs améliorations ont été apportées pour l’expérience utilisateur :</p>
        <ul>
            <li><strong>Afficheur LED (driver MAX7219) :</strong>  affichage en temps réel de la température et des alarmes (dépassement de seuil, verrou activé) directement sur site.</li>
            <li><strong>Offset de calibration :</strong>  configurable depuis ThingWorx, pour corriger les éventuelles dérives de mesure et garantir une valeur de température fiable dans le temps.</li>
        </ul>
        <figure class="image-container">
            <img src="images/schema_congel.jpg" alt="Mashup overwiew" />
            <figcaption>Organigramme du la logique mise en place</figcaption>
        </figure>
    </section>
    <section class="last_card">
        <section class="card" id="demarche">
            <h2>4. Résultats</h2>
            <p>
                J'ai donc pu mener a bien cette mission le PLC et ThingWorx communiquent bien. La porte se verrouille
                automatiquement lorsque la température n’est pas comprise dans les seuils
                pendant un temps donné. Les seuils, l'offset et le temps peuvent être changés à tout moment depuis ThingWorx ce qui
                met à jour le PLC.
            </p>
            <p> J'ai également pu lors de cette mission améliorer les interfaces utilisateur ThingWorx afin de les rendre plus lisible et faciles a prendre en main.</p>
            <figure class="image-container">
                <img src="images/mashup_fridge1.png" alt="Mashup overwiew" />
                <figcaption>Interface principale, on peut y voir tout les éléments importants comme la température dans le temps, les seuils et les alarmes</figcaption>
            </figure>
            <figure class="image-container">
                <img src="images/mashup_fridge3.png" alt="Mashup overwiew" />
                <figcaption>Interface de configuration, lorsque l'on modifie ici un paramètre il est ensuite envoyé au PLC afin de modifier ses paramètres.</figcaption>
            </figure>

        </section>
    </section>
    <div class="footer">
        <p>Contact : evegressepro@gmail.com, 0650663766</p>
        <a href="about.html">À propos de moi</a>
    </div>
</body>


</html>
